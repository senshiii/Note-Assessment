export default class TodoList{static get toolbox(){return{title:"Todo List",icon:'<svg width="17" height="15" viewBox="0 0 336 276" xmlns="http://www.w3.org/2000/svg"><path d="M291 150V79c0-19-15-34-34-34H79c-19 0-34 15-34 34v42l67-44 81 72 56-29 42 30zm0 52l-43-30-56 30-81-67-66 39v23c0 19 15 34 34 34h178c17 0 31-13 34-29zM79 0h178c44 0 79 35 79 79v118c0 44-35 79-79 79H79c-44 0-79-35-79-79V79C0 35 35 0 79 0z"/></svg>'}}constructor({data:e}){this.wrapper=null,this.todos=e.length>0?e:[],this.settings=[{name:"withBorder",icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M15.8 10.592v2.043h2.35v2.138H15.8v2.232h-2.25v-2.232h-2.4v-2.138h2.4v-2.28h2.25v.237h1.15-1.15zM1.9 8.455v-3.42c0-1.154.985-2.09 2.2-2.09h4.2v2.137H4.15v3.373H1.9zm0 2.137h2.25v3.325H8.3v2.138H4.1c-1.215 0-2.2-.936-2.2-2.09v-3.373zm15.05-2.137H14.7V5.082h-4.15V2.945h4.2c1.215 0 2.2.936 2.2 2.09v3.42z"/></svg>'}]}render(){if(this.wrapper=document.createElement("div"),this.wrapper.classList.add("row","w-100"),this.todos.length>0)this._initTodos(this.todos);else{const e=this._generateTodoForm();this.wrapper.append(e)}return this.wrapper}_generateTodoItem(e){const t=document.createElement("li");t.classList.add("d-flex","justify-content-start","align-items-center","w-100","border","p-2","rounded");const n=document.createElement("input");n.type="checkbox",n.classList.add("inline-flex","mx-2");const o=document.createElement("h6");return o.innerText=e,n.addEventListener("change",e=>{e.path[1].childNodes[1].classList.toggle("toggleLine")}),t.append(n),t.append(o),t}_generateTodoForm(){const e=document.createElement("div");e.id="input-wrapper",e.classList.add("col-12"),e.classList.add("d-flex");const t=document.createElement("input");t.type="text",t.id="todo-input",t.placeholder="Enter Todo Item",t.classList.add("form-control");const n=document.createElement("button");return n.classList.add("btn"),n.classList.add("w-100"),n.classList.add("btn-primary"),n.innerText="Add todo",n.addEventListener("click",e=>{this.todos.push(document.querySelector("#todo-input").value),this._addTodo(document.querySelector("#todo-input").value)}),e.append(t),e.append(n),e}_initTodos(e){const t=document.createElement("h2");t.innerText="Todos",this.wrapper.append(t);let n=document.createElement("ul");n.id="todo-ul",n.classList.add("w-100");for(let t of e)n.append(this._generateTodoItem(t));this.wrapper.append(n)}_addTodo(e){const t=this.wrapper.querySelector("#input-wrapper");t&&t.remove();let n=document.querySelector("#todo-ul");if(!n){const e=document.createElement("h2");e.innerText="Todos",this.wrapper.append(e),n=document.createElement("ul"),n.id="todo-ul",n.classList.add("w-100")}n.append(this._generateTodoItem(e)),this.wrapper.append(n)}save(e){return this.todos}renderSettings(){const e=document.createElement("div");return this.settings.forEach(t=>{let n=document.createElement("div");n.classList.add("cdx-settings-button"),n.innerHTML=t.icon,n.addEventListener("click",e=>{this.wrapper.append(this._generateTodoForm())}),e.appendChild(n)}),e}}